{% extends "layout/fullPageScroll.html" %}
{% load static %}  {# Load static files #}
{% load macros %}
{% loadmacros "macros/pagination.html" %}

{% block pageDropDowns %}
  <a href="{% url 'display_company_info' pk=company.id %}">Company Home</a>
  
{% endblock %}

{% block pageContent %}
  <div class="content-section">
    <h1 class="profile-title">Edit Company Members</h1>
    <input type="hidden" id="company-member-edit-link" value='{% url 'edit_company_members' pk=company.id %}'>
    <form class="form" id="memberForm" method="POST" action="{% url 'edit_company_members' pk=company.id %}">
      {% csrf_token %}
      <input type="hidden" name="page-number" value="{{ page_obj.number }}"/>
      <div class="member-grid">
        {% for user in users %}
          <div>
            <input type="hidden" name="member-checkbox-option" value="{{ user.id }}">
            <input type="checkbox" id="{{ user.id }}" name="member-checkbox" value="{{ user.id }}"
                   {% if user.id in selected_ids %} checked {% endif %} />
            <label for="{{ user.id }}">{{ user.name }}</label>
          </div>
        {% endfor %}
      </div>
      <button class="primary-button" onclick="event.preventDefault(); saveSelectedMembers({{ company.id  }});" type="submit">Save</button>
    </form>
     {% comment %} Changed to follow an alternate call form on the django-macros page: https://pypi.org/project/django-macros/
       I'm using a second parameter in the macro now,  which has a default argument,  and was having trouble passing something 
       to it with the "use_macro" syntax
      {% endcomment %}
    {% macro_block render_pagination page_obj %}

        {% macro_kwarg change_page_function %}
          {{ change_page_function }}
        {% endmacro_kwarg %}
    {% endmacro_block %}

    
    {% comment %} Working with/Reworking ideas from Google's AI / Gemini on the checklist selection perservation problem {% endcomment %}
   <script src="{% static 'javascript/jquery/1.12.4/jquery.min.js' %}"></script>
   <script src="{% static 'javascript/scripts.js' %}"></script>
   <script src="{% static 'javascript/editCompanyMembers.js' %}"></script> 


{% endblock %}





