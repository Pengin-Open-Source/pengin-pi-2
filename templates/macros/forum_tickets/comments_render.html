{% load macros %}
{% loadmacros "macros/pagination.html" %}
{% macro render_comments comments current_user action_url edit_url %}
  {% for comment in comments %}
  <tr><td>
    <div class="comment-title-underline">
      <div >by {{comment.author.name|escape}} at {{comment.date|escape}}</div>
        {% if current_user.is_authenticated %}
          <div class="text-buttons-container">
            {% if user == comment.author or is_admin %}
              <form class="delete-form" method="post" action="{{action_url}}">
                <button class="text-button" type="submit">Delete</button>
              </form> 
              <span class="text-button">|</span>
            {% endif %}
            {% if user == comment.author or is_admin  %}
              <a class="text-button" href="{{edit_url}}">Edit</a>
            {% endif %}
          </div>
        {% endif %}
    </div>
    <p>{{comment.content}}</p>
  </td></tr>
  {% endfor %}
  {% use_macro render_pagination comments %}
{% endmacro %}