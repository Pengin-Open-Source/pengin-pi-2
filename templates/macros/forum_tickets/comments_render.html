{% load macros %}
{% loadmacros "macros/pagination.html" %}
{% macro render_comments comments current_user %}
  {% for comment in comments %}
  <tr><td>
    <div class="comment-title-underline">
      <div >by {{comment.author.name|escape}} at {{comment.date|escape}}</div>
        {% if current_user.is_authenticated %}
          <div class="text-buttons-container">
            {% if user == comment.author or is_admin %}
              <form class="delete-form" method="post" action="{% url 'delete_comment' comment.id  %}">
                {% csrf_token %}
                <button class="text-button" type="submit" onclick="return confirm('Are you sure you want to delete this comment?')">Delete Comment</button>
              </form> 
              <span class="text-button">|</span>
            {% endif %}
            {% if user == comment.author or is_admin  %}
              <a class="text-button" href="{% url 'edit_comment' comment.post.thread.id comment.post.id comment.id %}">Edit Comment</a>
            {% endif %}
          </div>
        {% endif %}
    </div>
    <p>{{comment.content}}</p>
  </td></tr>
  {% endfor %}
  {% use_macro render_pagination comments %}
{% endmacro %}