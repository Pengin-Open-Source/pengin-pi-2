{% extends "layout/alternating_color_table.html" %}
{% load macros %}
{% loadmacros "macros/pagination.html" %}


{% block pageDropDowns %}
  <a href="{% url 'create_post' thread.id %}">Create Post</a>
  <a href="{% url 'forums' %}">Back To Forums</a>
{% endblock %}

{% block tableContent %}
  {% for post in page_obj %}
  <tr><td class="post-container">
    <a class="alternating-colors-table-links" href="{% url 'post' thread.id post.id %}">{{ post.title|escape }}</a>
    <div class="comment-title-underline">
      <div><b> by {{post.user.name|escape}} on {{post.date|escape}} </b> </div>
  
      {% if post.row_action == 'CREATE' %} 
         </div>
      {% elif post.row_action == 'EDIT' %}
        <i> (Edited) </i>  </div>
       <div class="comment-title-underline">
                  {% if post.is_create_missing %}
                  <p style="color: red;" >  
                    <i> Post Creation Date / Original Author not found!</i>
                  </p>
                  {% else %}
                      <p style="color: orange;" > 
                           Originally posted by {{post.author.name |escape}} on {{post.create_date|escape}}
                     </p>
                  {% endif %}
        </div>
      {% else %}
        </div>
         <div class="comment-title-underline">
            <p style="color: red;" >  
              <i> Warning: This may be a restored post's date of deletion. Notify your system administrator</i>
            </p>
        </div>
      {% endif %} 
   
    {% if is_admin %}
    <form method="post" action="{% url 'delete_post' post.id %}">
      {% csrf_token %}
      <button class="primary-button" style="color: purple;" type="submit" onclick="return confirm('Are you sure you want to delete this post?')">Delete</button>
    </form>
    {% endif %}
  </td></tr>
  {% endfor %}
  {% use_macro render_pagination page_obj %}
{% endblock %}


